---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "librenms_alertrule Resource - librenms"
subcategory: ""
description: |-
  
---

# librenms_alertrule (Resource)



## Example Usage

```terraform
# Example: create an alert rule for down devices
resource "librenms_alertrule" "rule1" {
  name  = "Device Down (ICMP)"
  notes = "Alert when a device is down and the reason is ICMP"

  # Due to their complicated structure, I would recommend initially configuring the rule in the LibreNMS UI
  # and then exporting from the API to get the correct JSON format.
  #
  # Example to get formatted builder output from an existing rule:
  #   curl -H "X-Auth-Token: token" http://localhost:8000/api/v0/rules/2 | jq '.rules.[0].builder | fromjson'
  #
  # You can also just use the serialized JSON string as it's natively represented in the LibreNMS API output,
  # but the readability is worse.
  #
  # builder = "{\"condition\": \"AND\", ....}"
  #
  builder = jsonencode({
    "condition" : "AND",
    "rules" : [
      {
        "id" : "macros.device_down",
        "field" : "macros.device_down",
        "type" : "integer",
        "input" : "radio",
        "operator" : "equal",
        "value" : "1"
      },
      {
        "id" : "devices.status_reason",
        "field" : "devices.status_reason",
        "type" : "string",
        "input" : "text",
        "operator" : "equal",
        "value" : "icmp"
      }
    ],
    "valid" : true
  })

  delay      = "11m"
  interval   = "5m"
  max_alerts = 1

  disabled = false
  severity = "critical"

  # defaults to all devices if devices is not defined
  # devices = [1, 2]

  # specify group IDs to limit the alert rule to specific device groups
  # groups = [
  #  librenms_devicegroup.my_group.id,
  # ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `builder` (String) The alert rule builder field defines the rule logic in serialized JSON format.
- `disabled` (Boolean) Whether the alert rule is disabled.
- `name` (String) The alert rule name.
- `severity` (String) The severity of the alert rule [`ok`, `warning`, `critical`].

### Optional

- `delay` (String) The delay before the alert rule is triggered, in a format like `5m` or `1h`.
- `devices` (List of Number) The list of device IDs attached to the alert rule. If not set, the rule applies to all devices.
- `groups` (List of Number) The list of group IDs attached to the alert rule. This can be defined alongside `devices` and `locations`.
- `interval` (String) The interval at which the alert rule is checked, in a format like `5m` or `1h`.
- `locations` (List of Number) The list of location IDs attached to the alert rule. This can be defined alongside `devices` and `groups`.
- `max_alerts` (Number) The number of times the alert rule will send an alert.
- `mute` (Boolean) Whether the alert rule is muted. Muted rules do not trigger alerts.
- `notes` (String) The alert rule notes.
- `procedure_url` (String) A procedure URL (runbook) related to the alert.

### Read-Only

- `extra` (String) Extra information stored in serialized JSON format. This is set by LibreNMS.
- `id` (Number) The unique numeric identifier of the LibreNMS alert rule.
- `query` (String) The SQL query rendered from the builder rules. This is set by LibreNMS.
